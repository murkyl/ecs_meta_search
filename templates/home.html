{% extends 'base_1.html' %}
{% set active_page = 'home' %}
{% block header %}
  <h1>{% block title %}Home{% endblock %}</h1>
{% endblock %}

{% block content %}
{% if not config['CLIENT'] %}
  <div>
    <p>You are not currently connected to any ECS instance. Please configure the ECS parameters through the <a href="{{ url_for('configuration') }}">Configuration</a> link.</p>
  </div>
{% else %}
  <div id="metasearch">
    <h2>Search</h2>
    <form method="post" id="search">
      {%- if form.errors -%}
      <div>
        <span>Errors were found in your input:</span>
        {% for field, errors in connect_form.errors.iteritems() %}
        <div class="alert alert-error">
            {{ connect_form[field].label }}: {{ ', '.join(errors) }}
        </div>
        {% endfor %}
      </div>
      {%- endif %}
      <div>
        {{ form.text_search.label }}
        {{ form.text_search(size=48) }}
      </div>
      <div>
        {{ form.submit() }}
      </div>
      {{ form.type }}
      {{ form.csrf_token }}
    </form>
  </div>
  <div id="status">
    <h2>Status</h2>
    <ul>
      <li>Connected to: {{ config['ENDPOINT'] }} </li>
      <li>User: {{ config['ACCESS_ID'] }}</li>
      <li>Bucket: {{ config['BUCKET'] }}</li>
      <li>Available buckets: {{ config['BUCKET_LIST']|length }}</li>
      <li>Searchable metadata tags
        <ul>
          {% for tag in config['SEARCH_TAGS'] %}
          <li>{{ tag }}</li>
          {% endfor %}
        </ul>
      </li>
    </ul>
  </div>
{% endif %}
{% endblock %}
